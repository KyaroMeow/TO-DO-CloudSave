<Window x:Class="TO_DO.Views.EditTaskWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:TO_DO.Converters"
        Title="Редактировать задачу"
        Height="350" Width="400"
        WindowStartupLocation="CenterOwner">

    <Window.Resources>
        <converters:TagCheckConverter x:Key="TagCheckConverter"/>
    </Window.Resources>

    <StackPanel Margin="10">
        <TextBox Text="{Binding Title}" Margin="0 0 0 10" />
        <TextBox Text="{Binding Description}" Margin="0 0 0 10" />
        <DatePicker SelectedDate="{Binding Deadline}" Margin="0 0 0 10" />

        <TextBlock Text="Теги:" FontWeight="Bold" Margin="0 10 0 5"/>

        <ItemsControl ItemsSource="{Binding AllTags}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Name}"
                              IsChecked="{Binding DataContext.SelectedTagIds, 
                                                  RelativeSource={RelativeSource AncestorType=Window}, 
                                                  Converter={StaticResource TagCheckConverter}, 
                                                  ConverterParameter={Binding Id}}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

        <Button Content="Сохранить"
                Margin="0 10 0 0"
                HorizontalAlignment="Right"
                Width="100"
                Click="Save_Click" />
    </StackPanel>
</Window>
